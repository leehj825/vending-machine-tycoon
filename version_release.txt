VENDING EMPIRE - RELEASE NOTES
================================

Version 1.1.15
-------------
Release Date: January 17, 2026
## New Features
- **Research Lab**: New Tech Tree system in HQ to purchase permanent upgrades
  - **Turbo Logistics**: Trucks move 25% faster ($2,000)
  - **Premium Branding**: Increase product prices by 10% without losing customers ($5,000)
  - **Efficient Cooling**: Reduces spoilage rate by 50% ($3,000)

---

Version 1.1.14
-------------
Release Date: January 16, 2026
## New Features
- **Machine Upgrade System**: Players can now spend cash to improve specific vending machines
  - **Capacity Upgrade**: Increases machine storage capacity by 25 slots per level ($500)
  - **Cooling System**: Reduces spoilage rate for perishable items ($800)
  - **Security System**: Reduces reputation penalties when machines are empty ($400)
  - **Ad Display**: Generates passive income ($10/day) ($1,000)
  - New "Upgrade" button in machine interior view

## Bug Fixes
- **Background Audio Fix**: Fixed issue where game sounds (effects, music) would stop background audio from other apps (e.g., YouTube, Spotify) on Android and iOS
  - Android: Audio focus is no longer requested, allowing background apps to continue playing
  - iOS: Audio session is configured to mix with other apps

---

Version 1.1.13
-------------
Release Date: January 15, 2026
## New Features
- **Rewarded Video Ads - Get Funding**: Watch ads to earn $1,000 cash
  - New "Get Funding" button in HQ Dashboard Business Overview section
  - Watch a rewarded video ad to receive $1,000 from investors
  - Automatically uses test ads for APK builds and real ads for bundle builds
  - Button automatically disabled on macOS (rewarded ads not supported on desktop)
  - Ad automatically reloads after viewing for continuous funding opportunities

## Improvements
- **Ad Integration**: Rewarded ads follow the same build-type detection as banner ads
  - Test ads for development/testing (APK builds)
  - Real ads for production releases (bundle builds with BUILD_TYPE=bundle)

## Bug Fixes
- Fixed "Get Funding" button attempting to work on macOS - now properly disabled with informative message

---

Version 1.1.12
-------------
Release Date: January 15, 2026
## Bug Fixes
- **Fixed Route Editing While Truck is Moving**: Fixed glitch where route order changes while truck is routing would cause UI issues and prevent further route modifications
  - Route manipulation functions (add/remove/reorder) now operate on the displayed route (pendingRoute if truck is moving)
  - Pending route changes are automatically applied when truck becomes idle
  - Users can now freely modify route order while truck is on the road without glitches

---

Version 1.1.11
-------------
Release Date: January 15, 2026
## Bug Fixes
- **Fixed Spoilage Bug**: Fixed critical bug where newly stocked items (especially sandwiches) would immediately expire and cause machine cash to go negative
  - When restocking, `dayAdded` is now always updated to current day to ensure fresh stock
  - Prevents infinite restocking loop for spoilable items
- **Fixed Machine Cash Validation**: Machine cash is now clamped to minimum 0.0 when loading saved games to prevent negative cash
- **Fixed Truck Loading Logic**: Trucks now check each product individually (not just total inventory) to trigger restocking when any product is below 50% of allocation
- **Fixed Truck Route Completion**: Trucks now visit all stops in route when any stop needs restocking, not just low stock ones
- **Fixed Driver Persistence**: Truck driver assignments (`hasDriver`) are now properly saved and loaded with game state

## Improvements
- **Truck Loading Buffer**: Trucks now carry 20% more stock than needed to ensure last stop in route can be fully stocked
- **Sales Rate Adjustments**: Increased sales rates by 20-35% for better game progression feel
- **Product Price Increases**: Increased product prices by 15-20% for better revenue
- **Machine Inventory Allocation**: Machine inventory allocations are now saved and loaded with game state

---

Version 1.1.10
-------------
Release Date: January 15, 2026
## New Features
- **HQ Staff Management System**: Centralized staff hiring and management in Headquarters
  - **Truck Drivers**: Pool-based driver system with automatic assignment to trucks ($50/day)
  - **Mechanics**: Auto-repair broken machines (1 repair per mechanic per hour, $50/day)
  - **Purchasing Agents**: Auto-buy stock based on target inventory levels (50 items per agent per hour, $50/day)
- **Smart Truck Loading**: Trucks now load items for all stops in their route when any stop is below 50% stock
- **Game Over System**: Game ends when cash falls below -$1000 with dialog to restart or return to menu
- **Hourly Operating Costs Display**: HQ dashboard now shows total hourly costs including staff salaries and estimated truck gas costs
- **Purchasing Agent Target Inventory**: Configure target inventory levels for each product in the Market screen

## Improvements
- **Truck Route Optimization**: Trucks visit all stops in their route when dispatched, not just low stock ones
- **Marketing Button Visibility**: Rush sell button now stays visible during map panning
- **Business Overview**: Refactored HQ dashboard with improved business metrics display
- **Save/Load System**: All staff management data (drivers, mechanics, agents, driver assignments) now persists across game saves
- **Staff Salary Balance**: All staff salaries standardized to $50/day for better game balance

## Bug Fixes
- Fixed truck drivers not being saved with game state
- Fixed trucks dispatching when all stops are above 50% stock
- Fixed marketing button disappearing during map panning
- Fixed truck loading logic to properly stock all machines in route
- Fixed driver assignment persistence across save/load

---

Version 1.1.9
-------------
Release Date: January 01, 2026
## New Features
- **Tap Pedestrians to Force Sales**: Tap any pedestrian on the city map to make them walk to the nearest vending machine and buy an item
- **Pedestrian Tutorial**: Interactive tutorial with blinking green circle and message to guide players on tapping pedestrians
- **A* Pathfinding for Pedestrians**: Pedestrians now use intelligent pathfinding through road tiles to reach machines, similar to trucks
- **Truck Driver Auto-Restock**: Hire truck drivers ($50/day) to automatically restock machines when stock drops below 50% allocation
- **Tutorial State Persistence**: All tutorial flags are now saved with game state, so tutorials won't reappear when loading saved games

## Improvements
- **Pedestrian Movement**: Fixed back-and-forth movement issue - pedestrians now avoid returning to previous tiles
- **Pedestrian Disappearance**: Pedestrians now disappear naturally on road tiles next to buildings instead of going below them
- **Unique Pedestrians**: Maximum 10 different pedestrians can appear at once, with no duplicates
- **Better Tap Detection**: Improved pedestrian tap detection to ensure they're always clickable, even while moving

## Bug Fixes
- Fixed pedestrian getting stuck between two tiles
- Fixed pedestrians not being tappable in some cases
- Fixed tutorial appearing repeatedly after being dismissed
- Fixed pedestrian disappearing below buildings

---
Version 1.1.8
-------------
Release Date: [To be filled]
## Bug Fixes
- Various bug fixes and improvements

## New Features
- **User-Defined Stock Allocations**: Customizable allocation targets per product with [-] and [+] controls
- **Smart Restocking**: Trucks respect user-defined allocation targets

---

Version 1.1.7
-------------
Release Date: [To be filled]
## New Features
- **New Building Types**: Added Hospital, Subway, and University buildings to the city map
- **Hospital**: Steady 24/7 demand for coffee, sandwiches, and fresh salads
- **Subway/Transit Station**: Rush hour spikes with high demand for coffee, snacks, and newspapers
- **University**: Afternoon and late-night study demand for coffee, energy drinks, and tech gadgets
---

Version 1.1.0
-------------
Release Date: [To be filled]
- Initial release
- Core gameplay features implemented
- Cross-platform support (Android, iOS, macOS, Windows, Linux, Web)

---

[Add previous versions and their release notes below]
